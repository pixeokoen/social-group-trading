import{d as J,x as Q,y as X,r as y,c as L,k as Z,a,b as e,f as c,g as w,F as j,e as M,i as k,h as D,p as i,z as v,A as U,B as V,t as d,s as x,o as r}from"./index-CK_gKUp_.js";const ee=()=>"http://localhost:8000",te={class:"py-6"},se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},oe={class:"bg-white shadow rounded-lg"},ae={class:"border-b border-gray-200"},re={class:"-mb-px flex"},le={class:"p-6"},ie={key:0},ne={class:"md:flex md:items-center md:justify-between mb-4"},de={class:"space-y-4"},ue={class:"flex items-start justify-between"},ce={class:"flex-1"},pe={class:"flex items-center space-x-3"},me={class:"text-sm font-medium text-gray-900"},ye={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},fe={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800"},ve={class:"mt-1 text-sm text-gray-500"},xe={class:"flex items-center space-x-2 ml-4"},be=["onClick"],ge=["onClick"],we=["onClick"],ke={key:1},_e={class:"md:flex md:items-center md:justify-between mb-4"},he={key:0,class:"space-y-4"},Ae={class:"flex justify-between items-start"},Ce={class:"flex-1"},Se={class:"flex items-center space-x-2"},Ue={class:"text-lg font-medium text-gray-900"},Ve={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},$e={class:"text-sm text-gray-600 mt-1"},Ee={class:"text-xs text-gray-500 mt-1"},Te={class:"mt-2"},je={class:"flex items-center mt-1"},Me={class:"text-xs bg-gray-100 px-2 py-1 rounded flex-1 break-all"},Fe=["onClick"],Ie={key:0,class:"mt-2"},De={class:"text-xs text-gray-500"},Pe={class:"mt-3"},Be={class:"flex flex-wrap gap-2"},Le={key:0,class:"ml-1 text-green-600"},Ne={key:0,class:"text-sm text-gray-500 italic"},We={class:"flex items-center space-x-2 ml-4"},qe=["onClick"],ze=["onClick"],He={key:1,class:"text-center py-8 text-gray-500"},Re={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},Ke={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Oe={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ye={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ge={class:"space-y-4"},Je={class:"block text-sm font-medium text-gray-700"},Qe={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Xe=["disabled"],Ze=["disabled"],et={key:1,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50"},tt={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto"},st={class:"px-6 py-4 border-b"},ot={class:"text-lg font-medium text-gray-900"},at={class:"space-y-6"},rt=["disabled"],lt={class:"block text-sm font-medium text-gray-700"},it={class:"mt-1"},nt=["disabled"],dt={class:"mt-1"},ut={class:"space-y-2 max-h-48 overflow-y-auto border rounded-md p-3"},ct={key:0,class:"text-sm text-gray-500 text-center py-2"},pt=["value"],mt={class:"ml-3 flex-1"},yt={class:"flex items-center justify-between"},ft={class:"text-sm font-medium text-gray-900"},vt={key:0,class:"flex items-center mt-1"},xt=["onUpdate:modelValue"],bt={class:"flex items-center"},gt={class:"mt-6 flex justify-end space-x-3"},wt=["disabled"],kt={key:0,class:"mr-2"},_t={key:2,class:"fixed z-10 inset-0 overflow-y-auto"},ht={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},At={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ct={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},St={class:"space-y-4"},Ut={class:"block text-sm font-medium text-gray-700"},Vt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},$t=["disabled"],Et=["disabled"],Mt=J({__name:"SettingsView",setup(Tt){const _=Q(),N=X(),b=y("accounts"),h=y([]),F=y([]),A=y(!1),$=y(!1),f=y(null),p=y(!1),C=y(!1),P=L(()=>ee()),E=L(()=>{var o;return(o=_.activeAccount)==null?void 0:o.id}),m=y({name:"",account_type:"paper",broker:"alpaca",api_key:"",api_secret:"",is_default:!1}),l=y({source_type:"whapi",source_identifier:"",name:"",description:"",is_active:!0,account_ids:[],auto_approve:{},filter_config:{chat_id:""}}),n=y({name:"",account_type:"paper",broker:"alpaca",api_key:"",api_secret:"",is_default:!1}),T=y(null),S=async()=>{try{const o=await x.get("/api/accounts");h.value=o.data}catch(o){console.error("Error fetching accounts:",o),alert("Failed to fetch accounts")}},I=async()=>{try{const o=await x.get("/api/sources");F.value=o.data}catch(o){console.error("Error fetching sources:",o),alert("Failed to load signal sources")}},W=async()=>{p.value=!0;try{await x.post("/api/accounts",m.value),A.value=!1,m.value={name:"",account_type:"paper",broker:"alpaca",api_key:"",api_secret:"",is_default:!1},await S(),await _.fetchActiveAccount()}catch(o){console.error("Error creating account:",o),alert("Failed to create account")}finally{p.value=!1}},q=async o=>{try{await x.post(`/api/accounts/${o}/activate`),await _.fetchActiveAccount(),await S()}catch(t){console.error("Error activating account:",t),alert("Failed to activate account")}},z=o=>{T.value=o,n.value={name:o.name,account_type:o.account_type,broker:o.broker,api_key:"",api_secret:"",is_default:o.is_default},C.value=!0},H=async()=>{var o,t;if(T.value){p.value=!0;try{const s={name:n.value.name,is_default:n.value.is_default};n.value.api_key&&(s.api_key=n.value.api_key),n.value.api_secret&&(s.api_secret=n.value.api_secret),await x.put(`/api/accounts/${T.value.id}`,s),C.value=!1,T.value=null,await S(),await _.fetchActiveAccount()}catch(s){console.error("Error updating account:",s),N.addError(((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.detail)||"Failed to update account")}finally{p.value=!1}}},R=async o=>{var t,s;if(confirm("Are you sure you want to delete this account?"))try{await x.delete(`/api/accounts/${o}`),await S(),o===E.value&&await _.fetchActiveAccount()}catch(u){console.error("Error deleting account:",u),alert(((s=(t=u.response)==null?void 0:t.data)==null?void 0:s.detail)||"Failed to delete account")}},K=o=>{const t=`${P.value}/api/webhook/whapi/${o.webhook_token}`;navigator.clipboard.writeText(t).then(()=>{alert("Webhook URL copied to clipboard!")}).catch(()=>{alert("Failed to copy URL. Please copy manually.")})},O=o=>{var t;f.value=o,l.value={source_type:o.source_type,source_identifier:o.source_identifier,name:o.name,description:o.description||"",is_active:o.is_active,account_ids:o.accounts.map(s=>s.account_id),auto_approve:o.accounts.reduce((s,u)=>(s[u.account_id]=u.auto_approve,s),{}),filter_config:{chat_id:((t=o.filter_config)==null?void 0:t.chat_id)||""}},$.value=!0},Y=async()=>{var o,t;p.value=!0;try{const s=f.value?`/api/sources/${f.value.id}`:"/api/sources",u=f.value?"put":"post";await x[u](s,l.value),await I(),B(),alert(f.value?"Source updated successfully":"Source created successfully")}catch(s){console.error("Error saving source:",s),alert(((t=(o=s.response)==null?void 0:o.data)==null?void 0:t.detail)||"Failed to save source")}finally{p.value=!1}},B=()=>{$.value=!1,f.value=null,l.value={source_type:"whapi",source_identifier:"",name:"",description:"",is_active:!0,account_ids:[],auto_approve:{},filter_config:{chat_id:""}}},G=async o=>{if(confirm(`Are you sure you want to delete "${o.name}"?`))try{await x.delete(`/api/sources/${o.id}`),await I(),alert("Source deleted successfully")}catch(t){console.error("Error deleting source:",t),alert("Failed to delete source")}};return Z(()=>{S(),I()}),(o,t)=>(r(),a("div",te,[e("div",se,[t[36]||(t[36]=e("h1",{class:"text-2xl font-semibold text-gray-900 mb-6"},"Settings",-1)),e("div",oe,[e("div",ae,[e("nav",re,[e("button",{onClick:t[0]||(t[0]=s=>b.value="accounts"),class:w([b.value==="accounts"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","py-4 px-6 border-b-2 font-medium text-sm transition-colors duration-200"])}," Trading Accounts ",2),e("button",{onClick:t[1]||(t[1]=s=>b.value="sources"),class:w([b.value==="sources"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","py-4 px-6 border-b-2 font-medium text-sm transition-colors duration-200"])}," Signal Sources ",2)])]),e("div",le,[b.value==="accounts"?(r(),a("div",ie,[e("div",ne,[t[27]||(t[27]=e("div",null,[e("h2",{class:"text-lg font-medium text-gray-900"},"Trading Accounts"),e("p",{class:"mt-1 text-sm text-gray-600"}," Manage your Alpaca trading accounts for paper and live trading. ")],-1)),e("button",{onClick:t[2]||(t[2]=s=>A.value=!0),class:"mt-3 md:mt-0 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Add Account ")]),e("div",de,[(r(!0),a(j,null,M(h.value,s=>(r(),a("div",{key:s.id,class:w(["border rounded-lg p-4",s.id===E.value?"border-primary-500 bg-primary-50":"border-gray-200"])},[e("div",ue,[e("div",ce,[e("div",pe,[e("h3",me,d(s.name),1),e("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.account_type==="paper"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"])},d(s.account_type),3),s.is_default?(r(),a("span",ye," Default ")):c("",!0),s.id===E.value?(r(),a("span",fe," Active ")):c("",!0)]),e("p",ve," Broker: "+d(s.broker.toUpperCase())+" â€¢ Created: "+d(new Date(s.created_at).toLocaleDateString()),1)]),e("div",xe,[s.id!==E.value?(r(),a("button",{key:0,onClick:u=>q(s.id),class:"text-sm text-primary-600 hover:text-primary-900"}," Activate ",8,be)):c("",!0),e("button",{onClick:u=>z(s),class:"text-sm text-gray-600 hover:text-gray-900"}," Edit ",8,ge),h.value.length>1?(r(),a("button",{key:1,onClick:u=>R(s.id),class:"text-sm text-red-600 hover:text-red-900"}," Delete ",8,we)):c("",!0)])])],2))),128))])])):c("",!0),b.value==="sources"?(r(),a("div",ke,[e("div",_e,[t[29]||(t[29]=e("div",null,[e("h2",{class:"text-lg font-medium text-gray-900"},"Signal Sources"),e("p",{class:"mt-1 text-sm text-gray-600"}," Configure which accounts receive signals from automated sources like WhatsApp groups. ")],-1)),e("button",{onClick:t[3]||(t[3]=s=>$.value=!0),class:"mt-3 md:mt-0 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},t[28]||(t[28]=[e("svg",{class:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),k(" Add Source ")]))]),F.value.length>0?(r(),a("div",he,[(r(!0),a(j,null,M(F.value,s=>{var u;return r(),a("div",{key:s.id,class:"border rounded-lg p-4 hover:shadow-md transition-shadow"},[e("div",Ae,[e("div",Ce,[e("div",Se,[e("h3",Ue,d(s.name),1),e("span",{class:w([s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},d(s.is_active?"Active":"Inactive"),3),e("span",Ve,d(s.source_type.toUpperCase()),1)]),e("p",$e,d(s.description||"No description"),1),e("p",Ee,"Identifier: "+d(s.source_identifier),1),e("div",Te,[t[31]||(t[31]=e("p",{class:"text-sm font-medium text-gray-700"},"Webhook URL:",-1)),e("div",je,[e("code",Me,d(`${P.value}/api/webhook/whapi/${s.webhook_token}`),1),e("button",{onClick:g=>K(s),class:"ml-2 p-1 text-gray-500 hover:text-gray-700",title:"Copy webhook URL"},t[30]||(t[30]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)]),8,Fe)])]),(u=s.filter_config)!=null&&u.chat_id?(r(),a("div",Ie,[e("p",De,[t[32]||(t[32]=e("span",{class:"font-medium"},"Chat ID Filter:",-1)),k(" "+d(s.filter_config.chat_id),1)])])):c("",!0),e("div",Pe,[t[33]||(t[33]=e("p",{class:"text-sm font-medium text-gray-700 mb-1"},"Routes signals to:",-1)),e("div",Be,[(r(!0),a(j,null,M(s.accounts,g=>(r(),a("span",{key:g.account_id,class:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800"},[k(d(g.account_name)+" ",1),g.auto_approve?(r(),a("span",Le," (Auto-approve) ")):c("",!0)]))),128)),s.accounts.length===0?(r(),a("span",Ne," No accounts linked ")):c("",!0)])])]),e("div",We,[e("button",{onClick:g=>O(s),class:"p-2 text-gray-400 hover:text-gray-600",title:"Edit source"},t[34]||(t[34]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,qe),e("button",{onClick:g=>G(s),class:"p-2 text-red-400 hover:text-red-600",title:"Delete source"},t[35]||(t[35]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,ze)])])])}),128))])):(r(),a("div",He," No signal sources configured yet. Add a source to automatically route signals to your accounts. "))])):c("",!0)])])]),A.value?(r(),a("div",Re,[e("div",Ke,[e("div",{class:"fixed inset-0 transition-opacity",onClick:t[4]||(t[4]=s=>A.value=!1)},t[37]||(t[37]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),e("div",Oe,[e("form",{onSubmit:D(W,["prevent"])},[e("div",Ye,[t[46]||(t[46]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Add Trading Account",-1)),e("div",Ge,[e("div",null,[t[38]||(t[38]=e("label",{class:"block text-sm font-medium text-gray-700"},"Account Name",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>m.value.name=s),type:"text",required:"",placeholder:"My Alpaca Account",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,512),[[v,m.value.name]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700"},"Account Type",-1)),i(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>m.value.account_type=s),required:"",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},t[39]||(t[39]=[e("option",{value:"paper"},"Paper Trading",-1),e("option",{value:"live"},"Live Trading",-1)]),512),[[U,m.value.account_type]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block text-sm font-medium text-gray-700"},"Broker",-1)),i(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>m.value.broker=s),required:"",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},t[41]||(t[41]=[e("option",{value:"alpaca"},"Alpaca",-1)]),512),[[U,m.value.broker]])]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm font-medium text-gray-700"},"API Key",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>m.value.api_key=s),type:"text",required:"",placeholder:"Your API Key",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,512),[[v,m.value.api_key]])]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-sm font-medium text-gray-700"},"API Secret",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>m.value.api_secret=s),type:"password",required:"",placeholder:"Your API Secret",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,512),[[v,m.value.api_secret]])]),e("div",null,[e("label",Je,[i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>m.value.is_default=s),type:"checkbox",class:"mr-2"},null,512),[[V,m.value.is_default]]),t[45]||(t[45]=k(" Set as default account "))])])])]),e("div",Qe,[e("button",{type:"submit",disabled:p.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},d(p.value?"Creating...":"Create Account"),9,Xe),e("button",{type:"button",onClick:t[11]||(t[11]=s=>A.value=!1),disabled:p.value,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"}," Cancel ",8,Ze)])],32)])])])):c("",!0),$.value?(r(),a("div",et,[e("div",tt,[e("div",st,[e("h3",ot,d(f.value?"Edit Signal Source":"Add Signal Source"),1)]),e("form",{onSubmit:D(Y,["prevent"]),class:"p-6"},[e("div",at,[e("div",null,[t[48]||(t[48]=e("label",{class:"block text-sm font-medium text-gray-700"},"Source Type",-1)),i(e("select",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.value.source_type=s),disabled:!!f.value,required:"",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},t[47]||(t[47]=[e("option",{value:"whapi"},"WhatsApp (WHAPI)",-1),e("option",{value:"telegram",disabled:""},"Telegram (Coming Soon)",-1),e("option",{value:"discord",disabled:""},"Discord (Coming Soon)",-1)]),8,rt),[[U,l.value.source_type]])]),e("div",null,[e("label",lt,d(l.value.source_type==="whapi"?"Channel/Instance Name":"Source Identifier"),1),e("div",it,[i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>l.value.source_identifier=s),type:"text",disabled:!!f.value,placeholder:"e.g., My Trading Phone",class:"block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,8,nt),[[v,l.value.source_identifier]]),t[49]||(t[49]=e("p",{class:"mt-1 text-sm text-gray-500"}," A descriptive name for this WhatsApp channel/phone number ",-1))])]),e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700"},"Display Name",-1)),i(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>l.value.name=s),type:"text",required:"",placeholder:"e.g., Trading Signals WhatsApp Group",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,512),[[v,l.value.name]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700"},"Description (Optional)",-1)),i(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=s=>l.value.description=s),rows:"3",placeholder:"Describe this signal source...",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,512),[[v,l.value.description]])]),e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700"},"Chat ID Filter (Optional)",-1)),e("div",dt,[i(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>l.value.filter_config.chat_id=s),type:"text",placeholder:"e.g., 120363123456789012@g.us",class:"block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,512),[[v,l.value.filter_config.chat_id]]),t[52]||(t[52]=e("p",{class:"mt-1 text-sm text-gray-500"}," Only process messages from this specific WhatsApp chat/group. Leave empty to process all messages. ",-1))])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Route Signals to Accounts ",-1)),e("div",ut,[h.value.length===0?(r(),a("div",ct," No accounts available. Create an account first. ")):c("",!0),(r(!0),a(j,null,M(h.value,s=>(r(),a("label",{key:s.id,class:"flex items-start p-2 hover:bg-gray-50 rounded cursor-pointer"},[i(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[17]||(t[17]=u=>l.value.account_ids=u),class:"mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,8,pt),[[V,l.value.account_ids]]),e("div",mt,[e("div",yt,[e("span",ft,d(s.name),1),e("span",{class:w([s.account_type==="paper"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800","px-2 py-0.5 rounded-full text-xs font-medium"])},d(s.account_type),3)]),l.value.account_ids.includes(s.id)?(r(),a("label",vt,[i(e("input",{type:"checkbox","onUpdate:modelValue":u=>l.value.auto_approve[s.id]=u,class:"h-3 w-3 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,8,xt),[[V,l.value.auto_approve[s.id]]]),t[54]||(t[54]=e("span",{class:"ml-2 text-xs text-gray-600"},"Auto-approve signals",-1))])):c("",!0)])]))),128))])]),e("div",null,[e("label",bt,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=s=>l.value.is_active=s),class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"},null,512),[[V,l.value.is_active]]),t[56]||(t[56]=e("span",{class:"ml-2 text-sm font-medium text-gray-700"},"Active",-1))]),t[57]||(t[57]=e("p",{class:"mt-1 text-sm text-gray-500"}," Only active sources will process incoming signals ",-1))])]),e("div",gt,[e("button",{type:"button",onClick:B,class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Cancel "),e("button",{type:"submit",disabled:p.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[p.value?(r(),a("span",kt,t[58]||(t[58]=[e("svg",{class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})],-1)]))):c("",!0),k(" "+d(f.value?"Update":"Create")+" Source ",1)],8,wt)])],32)])])):c("",!0),C.value?(r(),a("div",_t,[e("div",ht,[e("div",{class:"fixed inset-0 transition-opacity",onClick:t[19]||(t[19]=s=>C.value=!1)},t[59]||(t[59]=[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),e("div",At,[e("form",{onSubmit:D(H,["prevent"])},[e("div",Ct,[t[68]||(t[68]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"},"Edit Trading Account",-1)),e("div",St,[e("div",null,[t[60]||(t[60]=e("label",{class:"block text-sm font-medium text-gray-700"},"Account Name",-1)),i(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>n.value.name=s),type:"text",required:"",placeholder:"My Alpaca Account",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,512),[[v,n.value.name]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700"},"Account Type",-1)),i(e("select",{"onUpdate:modelValue":t[21]||(t[21]=s=>n.value.account_type=s),disabled:"",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base bg-gray-100"},t[61]||(t[61]=[e("option",{value:"paper"},"Paper Trading",-1),e("option",{value:"live"},"Live Trading",-1)]),512),[[U,n.value.account_type]])]),e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700"},"Broker",-1)),i(e("select",{"onUpdate:modelValue":t[22]||(t[22]=s=>n.value.broker=s),disabled:"",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base bg-gray-100"},t[63]||(t[63]=[e("option",{value:"alpaca"},"Alpaca",-1)]),512),[[U,n.value.broker]])]),e("div",null,[t[65]||(t[65]=e("label",{class:"block text-sm font-medium text-gray-700"},"API Key (leave empty to keep current)",-1)),i(e("input",{"onUpdate:modelValue":t[23]||(t[23]=s=>n.value.api_key=s),type:"text",placeholder:"Enter new API Key or leave empty",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,512),[[v,n.value.api_key]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700"},"API Secret (leave empty to keep current)",-1)),i(e("input",{"onUpdate:modelValue":t[24]||(t[24]=s=>n.value.api_secret=s),type:"password",placeholder:"Enter new API Secret or leave empty",class:"mt-1 block w-full px-4 py-3 border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 text-base"},null,512),[[v,n.value.api_secret]])]),e("div",null,[e("label",Ut,[i(e("input",{"onUpdate:modelValue":t[25]||(t[25]=s=>n.value.is_default=s),type:"checkbox",class:"mr-2"},null,512),[[V,n.value.is_default]]),t[67]||(t[67]=k(" Set as default account "))])])])]),e("div",Vt,[e("button",{type:"submit",disabled:p.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},d(p.value?"Updating...":"Update Account"),9,$t),e("button",{type:"button",onClick:t[26]||(t[26]=s=>C.value=!1),disabled:p.value,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"}," Cancel ",8,Et)])],32)])])])):c("",!0)]))}});export{Mt as default};
