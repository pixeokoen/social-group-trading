import{d as Se,r as m,w as fe,c as q,a,b as e,F as I,e as D,n as pe,f as h,g as y,t as d,o as i,_ as Ce,h as ve,i as B,j as Re,k as ft,l as vt,m as X,p as xt,v as mt,q as qe,s as F,u as Ve}from"./index-CK_gKUp_.js";const gt={class:"price-timeline flex items-center justify-center",style:{height:"320px"}},ht={class:"relative flex flex-col items-center w-48",style:{height:"320px","margin-left":"20px"}},bt={class:"relative flex items-center w-full",style:{height:"320px"}},yt={class:"relative w-24 pr-3",style:{height:"100%"}},_t={class:"text-right flex items-center"},wt={key:0,class:"mr-1.5"},kt={key:0,class:"w-3 h-3 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20"},$t={key:1,class:"w-3 h-3 text-slate-400",fill:"currentColor",viewBox:"0 0 20 20"},Pt={key:1,class:"mr-2"},St={class:"relative w-3 bg-gradient-to-t from-slate-400 to-slate-300 rounded-full shadow-inner border border-slate-500",style:{height:"100%"}},Ct={class:"relative w-16 pl-3",style:{height:"100%"}},Mt={class:"text-left flex items-center gap-1"},Lt=Se({__name:"TradingThermometer",props:{position:{},entryPrice:{},currentPrice:{},stopLoss:{},takeProfitLevels:{},scaleSettings:{}},setup(_){const o=_,b=m(!1),P=m("same"),C=m(o.currentPrice),n=m(o.currentPrice);fe(()=>o.currentPrice,(v,f)=>{if(v&&v>0&&f&&v!==f){const u=o.entryPrice,x=f===u&&v!==u||f!==u&&v===u;C.value=v,x?(b.value=!0,setTimeout(()=>{b.value=!1},500)):(v>f?P.value="up":v<f?P.value="down":P.value="same",b.value=!0,setTimeout(()=>{b.value=!1,P.value="same"},1e3)),n.value=v}else v&&v>0&&(C.value=v,b.value=!0,setTimeout(()=>{b.value=!1},500))},{immediate:!0}),o.currentPrice&&o.currentPrice>0&&(C.value=o.currentPrice);const r=q(()=>!o.takeProfitLevels||o.takeProfitLevels.length===0);q(()=>o.takeProfitLevels.filter(v=>v.status==="executed").reduce((v,f)=>{const u=f.price-o.entryPrice;return v+u*f.shares_quantity},0)),q(()=>{var x;const v=((x=o.position)==null?void 0:x.quantity)||150,f=o.takeProfitLevels.filter(k=>k.status==="executed").reduce((k,z)=>k+z.shares_quantity,0),u=v-f;return(o.currentPrice-o.entryPrice)*u});const j=q(()=>{var M,T;const v=[],f=[o.currentPrice];if(o.takeProfitLevels.forEach(g=>{v.push({id:g.id,type:"takeProfit",price:g.price,percentage:g.percentage||Math.round(g.shares_quantity/150*100),color:g.status==="executed"?"text-emerald-600":"text-slate-600",stripeClass:g.status==="executed"?"border-l-4 border-emerald-600":"border-l-4 border-slate-500",isExecuted:g.status==="executed"}),f.push(g.price)}),v.push({id:"entry",type:"entry",price:o.entryPrice,percentage:"0.0",color:"text-slate-800",stripeClass:"border-l-4 border-slate-700",isExecuted:!1}),f.push(o.entryPrice),o.stopLoss){const g=(o.stopLoss-o.entryPrice)/o.entryPrice*100;v.push({id:"stopLoss",type:"stopLoss",price:o.stopLoss,percentage:g.toFixed(1),color:"text-rose-600",stripeClass:"border-l-4 border-rose-500",isExecuted:!1}),f.push(o.stopLoss)}let u,x,k;if(r.value){const g=o.entryPrice,N=((M=o.scaleSettings)==null?void 0:M.topPercent)||10,L=((T=o.scaleSettings)==null?void 0:T.bottomPercent)||5;x=g+g*N/100,u=g-g*L/100,k=x-u}else{const g=Math.min(...f),N=Math.max(...f),V=(N-g)*.15;u=g-V,x=N+V,k=x-u}return console.log("Price calculation:",{adjustedMin:u,adjustedMax:x,adjustedRange:k,isBasic:r.value}),v.map(g=>{const N=(x-g.price)/k*100;return console.log(`Level ($${g.price}): ${N.toFixed(1)}%`),{...g,topPercent:Math.max(5,Math.min(95,N))}})}),w=q(()=>{var k,z;let v,f,u;if(r.value){const M=o.entryPrice,T=((k=o.scaleSettings)==null?void 0:k.topPercent)||10,g=((z=o.scaleSettings)==null?void 0:z.bottomPercent)||5;f=M+M*T/100,v=M-M*g/100,u=f-v}else{const M=[o.currentPrice,o.entryPrice];o.takeProfitLevels.forEach(V=>M.push(V.price)),o.stopLoss&&M.push(o.stopLoss);const T=Math.min(...M),g=Math.max(...M),L=(g-T)*.15;v=T-L,f=g+L,u=f-v}const x=(f-o.currentPrice)/u*100;return console.log(`Current price ($${o.currentPrice}): ${x.toFixed(1)}%`),Math.max(5,Math.min(95,x))});return(v,f)=>(i(),a("div",gt,[e("div",ht,[e("div",bt,[e("div",yt,[(i(!0),a(I,null,D(j.value,u=>(i(),a("div",{key:`label-${u.type}-${u.id}`,class:"absolute right-3 flex items-center whitespace-nowrap",style:pe({top:u.topPercent+"%",transform:"translateY(-50%)",zIndex:10})},[e("div",_t,[u.type==="takeProfit"?(i(),a("div",wt,[u.isExecuted?(i(),a("svg",kt,f[0]||(f[0]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):(i(),a("svg",$t,f[1]||(f[1]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"},null,-1)])))])):h("",!0),u.type==="takeProfit"?(i(),a("div",Pt,[e("span",{class:y(["text-xs font-medium px-1.5 py-0.5 rounded-full",u.isExecuted?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"])},d(u.percentage)+"% ",3)])):h("",!0),e("div",{class:y(["text-sm font-semibold",u.color])}," $"+d(u.price.toFixed(2)),3)])],4))),128))]),e("div",St,[(i(!0),a(I,null,D(j.value,u=>(i(),a("div",{key:`line-${u.type}-${u.id}`,class:"absolute",style:pe({top:u.topPercent+"%",right:"50%",transform:"translateY(-50%)",zIndex:20})},[e("div",{class:y(["h-0.5 bg-white shadow-sm",u.stripeClass]),style:{width:"12px"}},null,2)],4))),128)),e("div",{class:"absolute",style:pe({top:w.value+"%",left:"50%",transform:"translateY(-50%)",zIndex:30})},f[2]||(f[2]=[e("div",{class:"h-0.5 bg-blue-600 shadow-sm border-r-4 border-blue-600",style:{width:"12px"}},null,-1)]),4)]),e("div",Ct,[e("div",{class:"absolute left-3 flex items-center whitespace-nowrap transition-all duration-500 ease-out",style:pe({top:w.value+"%",transform:"translateY(-50%)",zIndex:10})},[e("div",Mt,[e("div",{class:y(["text-sm font-bold transition-all duration-300",{"scale-110":b.value,"text-emerald-600":P.value==="up","text-rose-600":P.value==="down","text-blue-600":P.value==="same"}])}," $"+d(C.value.toFixed(2)),3),(i(),a("svg",{class:y(["w-3 h-3 text-red-500",{"animate-ping":b.value,"animate-pulse":!b.value}]),fill:"currentColor",viewBox:"0 0 20 20"},f[3]||(f[3]=[e("path",{"fill-rule":"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z","clip-rule":"evenodd"},null,-1)]),2))])],4)])])])]))}}),zt=Ce(Lt,[["__scopeId","data-v-2601f2c9"]]),Tt={class:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Bt={class:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-t-2xl"},Nt={class:"flex items-center justify-between"},Et={class:"text-2xl font-bold"},jt={key:0,class:"p-6 space-y-6"},At={class:"bg-gradient-to-br from-slate-50 to-white rounded-xl p-5 border border-slate-200"},Ft={class:"grid grid-cols-2 gap-4"},It={class:"space-y-3"},Dt={class:"text-sm font-semibold text-slate-800"},qt={class:"text-sm font-semibold text-slate-800"},Vt={class:"space-y-3"},Rt={class:"text-sm font-semibold text-slate-800"},Ut={class:"text-sm font-semibold text-slate-800"},Ot={class:"text-sm font-semibold text-slate-800"},Yt={class:"text-sm font-semibold text-slate-800"},Ht={class:"bg-gradient-to-br from-slate-50 to-white rounded-xl p-5 border border-slate-200"},Qt={class:"grid grid-cols-2 gap-4"},Jt={key:0,class:"bg-gradient-to-br from-rose-50 to-red-50 rounded-xl p-5 border border-rose-200"},Gt={class:"grid grid-cols-3 gap-4"},Wt={class:"text-sm font-semibold text-rose-700"},Kt={class:"text-sm font-semibold text-slate-800"},Xt={key:1,class:"bg-gradient-to-br from-emerald-50 to-green-50 rounded-xl p-5 border border-emerald-200"},Zt={class:"space-y-3"},es={class:"grid grid-cols-5 gap-3"},ts={class:"text-sm font-semibold text-slate-800"},ss={class:"text-sm font-semibold text-emerald-700"},ls={class:"text-sm font-semibold text-slate-800"},os={class:"text-sm font-semibold text-slate-800"},rs={key:0,class:"mt-3 pt-3 border-t border-emerald-100"},ns={class:"grid grid-cols-2 gap-3"},as={key:0},is={class:"text-sm font-semibold text-slate-800"},ds={key:1},cs={class:"text-sm font-semibold text-emerald-700"},us={key:2,class:"bg-gradient-to-br from-slate-50 to-gray-50 rounded-xl p-5 border border-slate-200 text-center"},ps={class:"p-6 border-t border-slate-200 bg-slate-50 rounded-b-2xl"},fs={class:"flex justify-end"},vs=Se({__name:"TradeDetailsModal",props:{trade:{},isOpen:{type:Boolean}},emits:["close"],setup(_){const o=n=>{if(n==null)return"Not available";const r=typeof n=="string"?parseFloat(n):n;return isNaN(r)?"Not available":r.toFixed(2)},b=n=>{if(n==null)return"0";const r=typeof n=="string"?parseFloat(n):n;return isNaN(r)?"0":r===Math.floor(r)?r.toString():r.toFixed(1)},P=n=>{if(!n)return"Not available";try{return new Date(n).toLocaleString()}catch{return"Invalid date"}},C=n=>{switch(n==null?void 0:n.toLowerCase()){case"open":return"bg-blue-100 text-blue-800";case"closed":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800"}};return(n,r)=>{var j;return n.isOpen?(i(),a("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:r[2]||(r[2]=ve(w=>n.$emit("close"),["self"]))},[e("div",Tt,[e("div",Bt,[e("div",Nt,[e("div",null,[e("h2",Et,d((j=n.trade)==null?void 0:j.symbol),1),r[3]||(r[3]=e("p",{class:"text-slate-300 text-sm"},"Trade Details & Analysis",-1))]),e("button",{onClick:r[0]||(r[0]=w=>n.$emit("close")),class:"w-8 h-8 rounded-full bg-slate-600 hover:bg-slate-500 flex items-center justify-center transition-colors duration-200"},r[4]||(r[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),n.trade?(i(),a("div",jt,[e("div",At,[r[13]||(r[13]=e("h3",{class:"text-lg font-semibold text-slate-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),B(" Basic Information ")],-1)),e("div",Ft,[e("div",It,[e("div",null,[r[5]||(r[5]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Trade ID",-1)),e("p",Dt,d(n.trade.id||"Not available"),1)]),e("div",null,[r[6]||(r[6]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Action",-1)),e("span",{class:y(["inline-block px-2 py-1 text-xs font-bold rounded-full",n.trade.action==="BUY"?"bg-emerald-100 text-emerald-800":"bg-rose-100 text-rose-800"])},d(n.trade.action||"Not available"),3)]),e("div",null,[r[7]||(r[7]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Quantity",-1)),e("p",qt,d(b(n.trade.quantity))+" shares",1)]),e("div",null,[r[8]||(r[8]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Status",-1)),e("span",{class:y(["inline-block px-2 py-1 text-xs font-bold rounded-full",C(n.trade.status)])},d(n.trade.status||"Not available"),3)])]),e("div",Vt,[e("div",null,[r[9]||(r[9]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Link Group",-1)),e("p",Rt,d(n.trade.link_group_id||"Not linked"),1)]),e("div",null,[r[10]||(r[10]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Entry Price",-1)),e("p",Ut,"$"+d(o(n.trade.entry_price||n.trade.broker_fill_price)),1)]),e("div",null,[r[11]||(r[11]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Current Price",-1)),e("p",Ot,"$"+d(o(n.trade.current_price)),1)]),e("div",null,[r[12]||(r[12]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Exit Price",-1)),e("p",Yt,"$"+d(o(n.trade.exit_price)),1)])])])]),e("div",Ht,[r[16]||(r[16]=e("h3",{class:"text-lg font-semibold text-slate-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.51-1.31c-.562-.649-1.413-1.076-2.353-1.253V5z","clip-rule":"evenodd"})]),B(" Profit & Loss ")],-1)),e("div",Qt,[e("div",null,[r[14]||(r[14]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Floating P&L",-1)),e("p",{class:y(["text-lg font-bold",(n.trade.floating_pnl||0)>=0?"text-emerald-600":"text-rose-600"])},d((n.trade.floating_pnl||0)>=0?"+":"")+"$"+d(o(n.trade.floating_pnl)),3)]),e("div",null,[r[15]||(r[15]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Realized P&L",-1)),e("p",{class:y(["text-lg font-bold",(n.trade.pnl||0)>=0?"text-emerald-600":"text-rose-600"])},d((n.trade.pnl||0)>=0?"+":"")+"$"+d(o(n.trade.pnl)),3)])])]),n.trade.stop_loss?(i(),a("div",Jt,[r[20]||(r[20]=e("h3",{class:"text-lg font-semibold text-slate-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-rose-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})]),B(" Stop Loss ")],-1)),e("div",Gt,[e("div",null,[r[17]||(r[17]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Stop Price",-1)),e("p",Wt,"$"+d(o(n.trade.stop_loss)),1)]),e("div",null,[r[18]||(r[18]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Status",-1)),e("span",{class:y(["inline-block px-2 py-1 text-xs font-bold rounded-full",n.trade.stop_loss_status==="executed"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},d(n.trade.stop_loss_status||"Not available"),3)]),e("div",null,[r[19]||(r[19]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Executed Price",-1)),e("p",Kt,d(n.trade.stop_loss_executed_price?"$"+o(n.trade.stop_loss_executed_price):"Not executed"),1)])])])):h("",!0),n.trade.take_profit_levels&&n.trade.take_profit_levels.length>0?(i(),a("div",Xt,[r[28]||(r[28]=e("h3",{class:"text-lg font-semibold text-slate-800 mb-4 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-emerald-600",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),B(" Take Profit Levels ")],-1)),e("div",Zt,[(i(!0),a(I,null,D(n.trade.take_profit_levels,w=>(i(),a("div",{key:w.id,class:"bg-white rounded-lg p-4 border border-emerald-100"},[e("div",es,[e("div",null,[r[21]||(r[21]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Level",-1)),e("p",ts,d(w.level_number),1)]),e("div",null,[r[22]||(r[22]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Price",-1)),e("p",ss,"$"+d(o(w.price)),1)]),e("div",null,[r[23]||(r[23]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Percentage",-1)),e("p",ls,d(w.percentage)+"%",1)]),e("div",null,[r[24]||(r[24]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Shares",-1)),e("p",os,d(b(w.shares_quantity)),1)]),e("div",null,[r[25]||(r[25]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Status",-1)),e("span",{class:y(["inline-block px-2 py-1 text-xs font-bold rounded-full",w.status==="executed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},d(w.status),3)])]),w.executed_at||w.executed_price?(i(),a("div",rs,[e("div",ns,[w.executed_at?(i(),a("div",as,[r[26]||(r[26]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Executed At",-1)),e("p",is,d(P(w.executed_at)),1)])):h("",!0),w.executed_price?(i(),a("div",ds,[r[27]||(r[27]=e("label",{class:"text-xs font-medium text-slate-500 uppercase tracking-wide"},"Executed Price",-1)),e("p",cs,"$"+d(o(w.executed_price)),1)])):h("",!0)])])):h("",!0)]))),128))])])):h("",!0),!n.trade.stop_loss&&(!n.trade.take_profit_levels||n.trade.take_profit_levels.length===0)?(i(),a("div",us,r[29]||(r[29]=[e("svg",{class:"w-12 h-12 mx-auto text-slate-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("h3",{class:"text-lg font-semibold text-slate-600 mb-2"},"Plain Trade",-1),e("p",{class:"text-sm text-slate-500"},"This trade has no stop loss or take profit levels configured.",-1)]))):h("",!0)])):h("",!0),e("div",ps,[e("div",fs,[e("button",{onClick:r[1]||(r[1]=w=>n.$emit("close")),class:"px-6 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg font-medium transition-colors duration-200"}," Close ")])])])])):h("",!0)}}}),xs={name:"SellAllModal",props:{show:{type:Boolean,default:!1},position:{type:Object,required:!0}},emits:["close","confirm"],data(){return{loading:!1}},computed:{remainingShares(){return this.position.effective_quantity!==void 0?Number(this.position.effective_quantity):Number(this.position.quantity||0)-Number(this.position.executed_tp_shares||0)},currentPrice(){const _=Number(this.position.current_price||this.position.entry_price||this.position.broker_fill_price||0);return isNaN(_)?0:_},entryPrice(){const _=Number(this.position.entry_price||this.position.broker_fill_price||0);return isNaN(_)?0:_},estimatedTotal(){const _=this.remainingShares*this.currentPrice;return isNaN(_)?0:_},estimatedPnl(){if(this.position.action==="BUY"){const _=(this.currentPrice-this.entryPrice)*this.remainingShares;return isNaN(_)?0:_}else{const _=(this.entryPrice-this.currentPrice)*this.remainingShares;return isNaN(_)?0:_}},overriddenLevels(){const _=(this.position.levels||[]).filter(b=>b.type==="take_profit"&&b.status==="pending").length,o=(this.position.levels||[]).filter(b=>b.type==="stop_loss"&&b.status==="active").length;return{takeProfits:_,stopLosses:o,total:_+o}}},methods:{async confirmSellAll(){this.loading=!0;try{await this.$emit("confirm",{tradeId:this.position.id,remainingShares:this.remainingShares,currentPrice:this.currentPrice,estimatedPnl:this.estimatedPnl})}finally{this.loading=!1}}}},ms={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"},gs={class:"flex items-center justify-between mb-4"},hs={class:"mb-6"},bs={class:"space-y-3"},ys={class:"flex justify-between items-center"},_s={class:"font-semibold"},ws={class:"flex justify-between items-center"},ks={class:"font-semibold"},$s={class:"flex justify-between items-center"},Ps={class:"font-semibold"},Ss={class:"flex justify-between items-center"},Cs={class:"font-semibold"},Ms={class:"flex justify-between items-center"},Ls={class:"font-semibold"},zs={class:"flex justify-between items-center"},Ts={key:0,class:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg"},Bs={class:"text-sm text-amber-700 mt-1 space-y-1"},Ns={key:0},Es={key:1},js={class:"flex gap-3"},As=["disabled"],Fs={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"};function Is(_,o,b,P,C,n){return b.show?(i(),a("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:o[3]||(o[3]=ve(r=>_.$emit("close"),["self"]))},[e("div",ms,[e("div",gs,[o[5]||(o[5]=e("h3",{class:"text-lg font-semibold text-gray-900"}," Sell All Remaining Shares ",-1)),e("button",{onClick:o[0]||(o[0]=r=>_.$emit("close")),class:"text-gray-400 hover:text-gray-600"},o[4]||(o[4]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",hs,[o[14]||(o[14]=Re('<div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-4"><div class="flex"><svg class="w-5 h-5 text-red-400 mt-0.5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg><div class="text-sm text-red-700"><p class="font-medium">This action cannot be undone</p><p class="mt-1">All pending take profit and stop loss levels will be cancelled.</p></div></div></div>',1)),e("div",bs,[e("div",ys,[o[6]||(o[6]=e("span",{class:"text-sm font-medium text-gray-600"},"Symbol:",-1)),e("span",_s,d(b.position.symbol),1)]),e("div",ws,[o[7]||(o[7]=e("span",{class:"text-sm font-medium text-gray-600"},"Remaining Shares:",-1)),e("span",ks,d(n.remainingShares.toLocaleString()),1)]),e("div",$s,[o[8]||(o[8]=e("span",{class:"text-sm font-medium text-gray-600"},"Current Price:",-1)),e("span",Ps,"$"+d(n.currentPrice.toFixed(2)),1)]),e("div",Ss,[o[9]||(o[9]=e("span",{class:"text-sm font-medium text-gray-600"},"Entry Price:",-1)),e("span",Cs,"$"+d(n.entryPrice.toFixed(2)),1)]),o[13]||(o[13]=e("hr",{class:"border-gray-200"},null,-1)),e("div",Ms,[o[10]||(o[10]=e("span",{class:"text-sm font-medium text-gray-600"},"Estimated Total:",-1)),e("span",Ls,"$"+d(n.estimatedTotal.toFixed(2)),1)]),e("div",zs,[o[11]||(o[11]=e("span",{class:"text-sm font-medium text-gray-600"},"Estimated P&L:",-1)),e("span",{class:y([{"text-green-600":n.estimatedPnl>=0,"text-red-600":n.estimatedPnl<0},"font-semibold"])},d(n.estimatedPnl>=0?"+":"")+"$"+d(n.estimatedPnl.toFixed(2)),3)]),n.overriddenLevels.total>0?(i(),a("div",Ts,[o[12]||(o[12]=e("p",{class:"text-sm text-amber-800 font-medium"},"Levels to be cancelled:",-1)),e("ul",Bs,[n.overriddenLevels.takeProfits>0?(i(),a("li",Ns," • "+d(n.overriddenLevels.takeProfits)+" Take Profit level(s) ",1)):h("",!0),n.overriddenLevels.stopLosses>0?(i(),a("li",Es," • "+d(n.overriddenLevels.stopLosses)+" Stop Loss level(s) ",1)):h("",!0)])])):h("",!0)])]),e("div",js,[e("button",{onClick:o[1]||(o[1]=r=>_.$emit("close")),class:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"}," Cancel "),e("button",{onClick:o[2]||(o[2]=(...r)=>n.confirmSellAll&&n.confirmSellAll(...r)),disabled:C.loading,class:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center"},[C.loading?(i(),a("svg",Fs,o[15]||(o[15]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):h("",!0),B(" "+d(C.loading?"Executing...":"Sell All"),1)],8,As)])])])):h("",!0)}const Ds=Ce(xs,[["render",Is]]),qs={class:"py-6"},Vs={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Rs={class:"bg-gray-50 py-2 mb-4"},Us={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-3 lg:space-y-0"},Os={class:"flex items-center space-x-4"},Ys={class:"flex items-center bg-gray-100 rounded-lg p-1"},Hs={key:0,class:"relative"},Qs={class:"relative"},Js={key:0,class:"text-gray-500"},Gs={key:1,class:"text-gray-900"},Ws={key:2,class:"flex flex-wrap gap-1"},Ks={key:0,class:"text-xs text-gray-500"},Xs={class:"absolute z-10 mt-1 w-full rounded-lg bg-white border border-gray-300 shadow-lg"},Zs={class:"p-2"},el=["onClick"],tl=["checked","onChange"],sl={class:"ml-2 text-sm text-gray-900 cursor-pointer"},ll={class:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4"},ol={class:"flex items-center space-x-3"},rl=["disabled"],nl={key:0,class:"flex items-center space-x-4"},al={key:0,class:"text-sm text-gray-500"},il={key:1,class:"text-sm text-green-600 flex items-center"},dl={key:0,class:"mt-4"},cl={class:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-md"},ul={class:"flex"},pl={class:"ml-3 flex-1"},fl={class:"text-sm text-blue-700"},vl={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4 transition-all duration-300"},xl={class:"flex items-center justify-between"},ml={class:"flex items-center space-x-4"},gl={class:"text-blue-800 font-medium"},hl={class:"flex items-center space-x-3"},bl=["disabled"],yl={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},_l={key:1,class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wl=["disabled"],kl={class:"mt-4"},$l={key:0,class:"flex flex-col relative"},Pl=["height"],Sl=["d","stroke"],Cl=["cx","cy","fill"],Ml=["cx","cy","fill"],Ll={class:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"},zl={class:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"},Tl={class:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg relative"},Bl={class:"min-w-full divide-y divide-gray-200"},Nl={class:"bg-gray-50"},El={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},jl=["checked","indeterminate"],Al={class:"bg-white divide-y divide-gray-200"},Fl={class:"px-6 py-4 whitespace-nowrap"},Il={class:"flex items-center"},Dl=["checked","onChange"],ql={key:0,class:"ml-2"},Vl={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Rl={class:"px-6 py-4 whitespace-nowrap text-sm"},Ul={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ol={key:0,class:"text-amber-600 font-medium"},Yl={class:"text-slate-400 font-normal"},Hl={key:1},Ql={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Jl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Gl={key:0},Wl={key:1},Kl={key:2},Xl={class:"px-6 py-4 whitespace-nowrap text-sm"},Zl={key:2,class:"text-gray-400"},eo={class:"px-6 py-4 whitespace-nowrap"},to={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},so=["onClick"],lo={key:0,class:"text-center py-12"},oo={key:1},ro={key:0,class:"bg-gray-50 rounded-xl p-8"},no={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},ao={class:"absolute -top-3 -left-3 z-20"},io=["title"],co={key:0,class:"w-4 h-4 text-white drop-shadow-sm",fill:"currentColor",viewBox:"0 0 24 24"},uo={key:1,class:"w-4 h-4 text-white drop-shadow-sm",fill:"currentColor",viewBox:"0 0 20 20"},po={class:"absolute -top-3 -right-3 z-20"},fo={class:"relative"},vo=["onClick"],xo=["onClick"],mo=["onClick"],go={class:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-4 rounded-t-2xl mb-4 relative z-10 -m-5 mx-[-20px] mt-[-20px]"},ho={class:"flex items-center justify-between"},bo={class:"text-xl font-bold text-white"},yo={key:0,class:"text-slate-300 text-sm"},_o={class:"text-amber-200 font-medium"},wo={class:"text-slate-400"},ko={key:1,class:"text-slate-300 text-sm"},$o={class:"mb-4 relative z-10 flex space-x-2"},Po={class:"relative z-10 flex justify-center items-center bg-gradient-to-b from-slate-50 to-white rounded-xl p-6 shadow-inner flex-1 min-h-[240px]"},So={key:0,class:"absolute top-2 left-2 z-30 bg-white/90 backdrop-blur-sm rounded-lg p-2 shadow-sm border"},Co={class:"space-y-2 text-xs"},Mo={class:"flex items-center space-x-1"},Lo=["value","onInput"],zo={class:"flex items-center space-x-1"},To=["value","onInput"],Bo={class:"w-full max-w-[200px]"},No=Se({__name:"TradesView",setup(_){const o=m([]),b=m([]),P=m(!1),C=m(null),n=m([]),r=m(!1),j=m(!1),w=m(null),v=m(!1),f=m(null);m("all");const u=m("list"),x=m(new Set),k=m(!1),z=m({}),M={topPercent:10,bottomPercent:5},T=l=>{if(!z.value[l]){const s=localStorage.getItem(`tradeScale_${l}`);if(s)try{z.value[l]=JSON.parse(s)}catch{z.value[l]={...M}}else z.value[l]={...M}}return z.value[l]},g=(l,s)=>{z.value[l]=s,localStorage.setItem(`tradeScale_${l}`,JSON.stringify(s))},N=(l,s,t)=>{const p={...T(l),[s]:t};g(l,p)},L=m({}),V=(l,s)=>{s&&s.stopPropagation(),Object.keys(L.value).forEach(t=>{t!==l&&(L.value[t]=!1)}),L.value[l]=!L.value[l]},Z=()=>{Object.keys(L.value).forEach(l=>{L.value[l]=!1})},xe=m(!1),me=m(null),ee=m(!1),te=m(null),se=m(!1),$=m(["pending","open","closed","cancelled"]),J=[{value:"pending",label:"Pending"},{value:"open",label:"Open"},{value:"closed",label:"Closed"},{value:"cancelled",label:"Cancelled"}],ge=m({}),le=m(null),Me=m(500),Le=m(0);let he=null,be=null,ye=null;const Ue=()=>{const l=localStorage.getItem("tradesCurrentView");l&&["list","grid"].includes(l)&&(u.value=l);const s=localStorage.getItem("tradesSelectedStatuses");if(s)try{const t=JSON.parse(s);Array.isArray(t)&&($.value=t)}catch(t){console.warn("Failed to parse saved status filter:",t)}};fe(u,l=>{localStorage.setItem("tradesCurrentView",l)}),fe($,l=>{localStorage.setItem("tradesSelectedStatuses",JSON.stringify(l))},{deep:!0}),fe([o,$],async()=>{await Ve(),nt()},{deep:!0});const _e=q(()=>{const l={};return b.value.forEach(t=>{if(t.link_group_id){const c=parseFloat(String(t.quantity))||0;l[t.link_group_id]||(l[t.link_group_id]=0),t.action==="BUY"?l[t.link_group_id]+=c:t.action==="SELL"&&(l[t.link_group_id]-=c)}}),b.value.filter(t=>t.status==="open"||t.status==="filled"?!0:t.status==="closed"?t.action==="BUY":!1).filter(t=>{if(!t.link_group_id)return!0;const c=l[t.link_group_id]||0,p=Math.abs(c)>0;return t.status==="closed"&&t.action==="BUY",p})}),oe=l=>l.take_profit_levels?l.take_profit_levels.filter(s=>s.status==="executed").reduce((s,t)=>{const c=Number(l.entry_price||l.broker_fill_price||0),p=t.price-c;return s+p*t.shares_quantity},0):0,G=l=>{var p;let s;if(l.link_group_id)s=R(l);else{const S=l.quantity||0,A=((p=l.take_profit_levels)==null?void 0:p.filter(W=>W.status==="executed").reduce((W,$e)=>W+$e.shares_quantity,0))||0;s=S-A}const t=Number(l.entry_price||l.broker_fill_price||0),c=je(l);return l.action==="BUY"?(c-t)*s:(t-c)*s},Oe=q(()=>{Le.value;const l=new Map,s=[];return o.value.forEach(t=>{t.link_group_id&&(l.has(t.link_group_id)||l.set(t.link_group_id,[]),l.get(t.link_group_id).push(t))}),Array.from(l.entries()).forEach(([t,c],p)=>{var S;if(c.length>=2){const A=c.sort((ae,ie)=>{const H=o.value.findIndex(K=>K.id===ae.id),de=o.value.findIndex(K=>K.id===ie.id);return H-de}),W=A[0],$e=A[A.length-1],Pe=ge.value[W.id],Ie=ge.value[$e.id];if(Pe&&Ie){const ae=Pe.getBoundingClientRect(),ie=Ie.getBoundingClientRect(),H=(S=le.value)==null?void 0:S.getBoundingClientRect(),de=Pe.closest("table");if(H&&de){const K=de.getBoundingClientRect(),ce=ae.top-H.top+ae.height/2,ue=ie.top-H.top+ie.height/2,Q=K.left-H.left,De=Math.abs(ue-ce)*.3,pt=`M ${Q},${ce} C ${Q-De},${ce} ${Q-De},${ue} ${Q},${ue}`;s.push({path:pt,color:"#3B82F6",startDot:{x:Q,y:ce},endDot:{x:Q,y:ue}})}}}}),s}),R=l=>{if(!l.link_group_id)return l.quantity||0;let s=0;return b.value.forEach(t=>{if(t.link_group_id===l.link_group_id){const c=parseFloat(String(t.quantity))||0;t.action==="BUY"?s+=c:t.action==="SELL"&&(s-=c)}}),Math.abs(s)},U=l=>{const s=typeof l=="string"?parseFloat(l):l;return isNaN(s)?"0":s===Math.floor(s)?s.toString():s.toFixed(4)},O=l=>{if(l==null)return"N/A";const s=typeof l=="string"?parseFloat(l):l;return isNaN(s)?"N/A":s.toFixed(2)},Ye=l=>l.take_profit_levels&&l.take_profit_levels.length>0,He=l=>l.stop_loss&&l.stop_loss>0,we=l=>Ye(l)||He(l),Qe=l=>{me.value=l,xe.value=!0},Je=()=>{xe.value=!1,me.value=null},Ge=l=>{const s=G(l);return s>0?"shadow-lg shadow-green-600/15 gradient-border-positive hover:shadow-xl hover:shadow-green-600/25":s<0?"shadow-lg shadow-red-600/15 gradient-border-negative hover:shadow-xl hover:shadow-red-600/25":"shadow-lg shadow-slate-500/10 border-2 border-slate-300 hover:shadow-xl hover:shadow-slate-500/20 hover:border-slate-400"},We=l=>{const s={...l,effective_quantity:R(l)};te.value=s,ee.value=!0,Z()},Ke=async l=>{var s,t;try{console.log("🎯 Executing Sell All for trade:",l.tradeId);const p=(await F.post(`/api/trades/${l.tradeId}/sell-all`)).data;console.log("✅ Sell All executed:",p),n.value.push({id:Date.now(),data:{type:"success",message:`Sell All executed: ${p.shares_sold} shares at $${p.sell_price.toFixed(2)}. P&L: ${p.realized_pnl>=0?"+":""}$${p.realized_pnl.toFixed(2)}`,trade_id:l.tradeId,status:"executed",fill_price:p.sell_price,quantity:p.shares_sold}}),ee.value=!1,te.value=null,await E()}catch(c){console.error("❌ Error executing sell all:",c);const p=((t=(s=c.response)==null?void 0:s.data)==null?void 0:t.detail)||c.message||"Failed to execute sell all order";n.value.push({id:Date.now(),data:{type:"error",message:`Sell All failed: ${p}`,trade_id:l.tradeId,status:"error"}})}},Xe=l=>new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",second:"2-digit"}).format(l),Ze=l=>{x.value.has(l)?x.value.delete(l):x.value.add(l)},re=()=>{x.value.clear()},ze=()=>{o.value.forEach(l=>{x.value.add(l.id)})},et=async()=>{if(x.value.size<2){alert("Please select at least 2 trades to link");return}try{k.value=!0;const l=Array.from(x.value),s=await F.post("/api/trades/link",l);await E(),re(),alert(`Successfully linked ${l.length} trades`)}catch(l){console.error("Error linking trades:",l),alert("Error linking trades")}finally{k.value=!1}},tt=async()=>{if(x.value.size===0){alert("Please select trades to unlink");return}try{k.value=!0;const l=Array.from(x.value);await F.post("/api/trades/unlink",l),await E(),re(),alert(`Successfully unlinked ${l.length} trades`)}catch(l){console.error("Error unlinking trades:",l),alert("Error unlinking trades")}finally{k.value=!1}},E=async()=>{try{const l=await F.get("/api/trades");b.value=l.data,ne(),await Ve(),Be()}catch(l){console.error("Error fetching trades:",l)}},ne=()=>{$.value.length===0?o.value=[]:o.value=b.value.filter(l=>$.value.includes(l.status))},st=l=>{const s=J.find(t=>t.value===l);return s?s.label:l},Te=l=>{const s=$.value.indexOf(l);s>-1?$.value.splice(s,1):$.value.push(l),ne()},lt=()=>{$.value=J.map(l=>l.value),ne()},ot=()=>{$.value=[],ne()},rt=l=>{setTimeout(()=>{var t;const s=(t=l.target)==null?void 0:t.closest(".relative");s!=null&&s.contains(document.activeElement)||(se.value=!1)},150)},Be=()=>{var l;if((l=le.value)!=null&&l.parentElement){const s=le.value.parentElement.querySelector("table");s&&(Me.value=s.offsetHeight)}},nt=()=>{Be(),Le.value++},ke=async()=>{P.value=!0;try{const l=await F.get("/api/trades/sync");C.value=new Date,await E(),l.data.trades_updated>0&&console.log(`Synced ${l.data.trades_updated} trades with broker`)}catch(l){console.error("Error syncing trades:",l)}finally{P.value=!1}},Ne=async()=>{try{const s=(await F.get("/api/notifications/trades?unread_only=true")).data;if(s.length>0){n.value=s,r.value=!0;for(const t of s){const c=t.data,p=o.value.findIndex(S=>S.id===c.trade_id);p!==-1&&(o.value[p]={...o.value[p],status:c.status,entry_price:c.fill_price||o.value[p].entry_price,quantity:c.quantity||o.value[p].quantity,justUpdated:!0},setTimeout(()=>{o.value[p]&&(o.value[p].justUpdated=!1)},3e3));try{await F.post(`/api/notifications/trades/${t.id}/read`)}catch(S){console.error("Error marking notification as read:",S)}}s.some(t=>["order_filled","order_partial_fill"].includes(t.data.type))&&await E(),setTimeout(()=>{Ee()},5e3)}}catch(l){console.error("Error checking notifications:",l),r.value=!1}},Ee=()=>{n.value=[]},Y=m({}),je=l=>{const s=l.symbol,t=Number(l.entry_price||l.broker_fill_price||0),c=Number(l.current_price||0);return Y.value[s]&&Y.value[s]!==t?Y.value[s]:c>0&&Math.abs(c-t)>.01?(Y.value[s]=c,c):t},Ae=async()=>{try{const l=_e.value.map(p=>p.symbol).filter(Boolean);if(l.length===0)return;const s=[...new Set(l)],c=(await F.post("/api/trades/current-prices",{symbols:s})).data;o.value.forEach(p=>{if(c[p.symbol]){const S=c[p.symbol],A=Number(p.entry_price||p.broker_fill_price||0);Math.abs(S-A)>.01&&(p.current_price=S,Y.value[p.symbol]=S)}}),b.value.forEach(p=>{if(c[p.symbol]){const S=c[p.symbol],A=Number(p.entry_price||p.broker_fill_price||0);Math.abs(S-A)>.01&&(p.current_price=S,Y.value[p.symbol]=S)}})}catch(l){console.error("Error updating current prices:",l)}},at=l=>{const s=l.action==="BUY"?"SELL":"BUY";w.value={id:0,symbol:l.symbol,action:s,quantity:l.quantity,source:"close_position",original_trade_id:l.id},j.value=!0},it=()=>{j.value=!1,w.value=null},dt=async l=>{alert(`Trade closed successfully! Order ID: ${l.broker_order_id}`),await E()},ct=()=>{f.value={id:0,symbol:"",action:"BUY",quantity:100,source:"manual_create"},v.value=!0},Fe=()=>{v.value=!1,f.value=null},ut=async l=>{alert(`Trade created successfully! Order ID: ${l.broker_order_id}`),await E(),Fe()};return ft(()=>{Ue(),$.value.length===0&&($.value=J.map(l=>l.value)),E(),be=setInterval(()=>{Ne()},3e3),ye=setInterval(()=>{Ae()},2e3),he=setInterval(()=>{ke()},3e4),ke(),Ne(),Ae(),window.addEventListener("account-switched",E),document.addEventListener("click",Z)}),vt(()=>{he&&clearInterval(he),be&&clearInterval(be),ye&&clearInterval(ye),window.removeEventListener("account-switched",E),document.removeEventListener("click",Z)}),(l,s)=>(i(),a("div",qs,[e("div",Vs,[s[53]||(s[53]=e("div",{class:"mb-3"},[e("h1",{class:"text-2xl font-semibold text-gray-900"},"Trades")],-1)),e("div",Rs,[e("div",Us,[e("div",Os,[e("div",Ys,[e("button",{onClick:s[0]||(s[0]=t=>u.value="list"),class:y(["px-3 py-1.5 text-sm font-medium rounded-md transition-colors duration-200",u.value==="list"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])},s[11]||(s[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)]),2),e("button",{onClick:s[1]||(s[1]=t=>u.value="grid"),class:y(["px-3 py-1.5 text-sm font-medium rounded-md transition-colors duration-200",u.value==="grid"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"])},s[12]||(s[12]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]),2)]),u.value==="list"?(i(),a("div",Hs,[s[14]||(s[14]=e("label",{class:"sr-only"},"Filter by status",-1)),e("div",Qs,[e("button",{onClick:s[2]||(s[2]=t=>se.value=!se.value),onBlur:rt,class:"relative w-64 rounded-lg border border-gray-300 bg-white px-4 py-2 text-left text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"},[$.value.length===0?(i(),a("span",Js,"Select statuses...")):$.value.length===J.length?(i(),a("span",Gs,"All Statuses")):(i(),a("div",Ws,[(i(!0),a(I,null,D($.value.slice(0,2),t=>(i(),a("span",{key:t,class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},d(st(t)),1))),128)),$.value.length>2?(i(),a("span",Ks," +"+d($.value.length-2)+" more ",1)):h("",!0)])),s[13]||(s[13]=e("svg",{class:"absolute right-3 top-3 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],32),xt(e("div",Xs,[e("div",Zs,[e("div",{class:"flex items-center justify-between mb-2 pb-2 border-b border-gray-200"},[e("button",{onClick:lt,class:"text-xs text-blue-600 hover:text-blue-800 font-medium"}," Select All "),e("button",{onClick:ot,class:"text-xs text-gray-600 hover:text-gray-800 font-medium"}," Clear All ")]),(i(),a(I,null,D(J,t=>e("div",{key:t.value,class:"flex items-center py-1.5 px-2 hover:bg-gray-50 rounded cursor-pointer",onClick:c=>Te(t.value)},[e("input",{type:"checkbox",checked:$.value.includes(t.value),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",onClick:s[3]||(s[3]=ve(()=>{},["stop"])),onChange:c=>Te(t.value)},null,40,tl),e("label",sl,d(t.label),1)],8,el)),64))])],512),[[mt,se.value]])])])):h("",!0)]),e("div",ll,[e("div",ol,[e("button",{onClick:ct,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200"},s[15]||(s[15]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),B(" Create Trade ")])),e("button",{onClick:ke,disabled:P.value,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-colors duration-200"},[(i(),a("svg",{class:y(["mr-2 h-4 w-4",P.value?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},s[16]||(s[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2)),B(" "+d(P.value?"Syncing...":"Sync with Broker"),1)],8,rl)]),C.value||r.value?(i(),a("div",nl,[C.value?(i(),a("span",al," Last sync: "+d(Xe(C.value)),1)):h("",!0),r.value?(i(),a("span",il,s[17]||(s[17]=[e("span",{class:"inline-block w-2 h-2 bg-green-600 rounded-full mr-1 animate-pulse"},null,-1),B(" Real-time updates active ")]))):h("",!0)])):h("",!0)])])]),n.value.length>0?(i(),a("div",dl,[e("div",cl,[e("div",ul,[s[19]||(s[19]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),e("div",pl,[e("p",fl,d(n.value[0].data.message),1)]),e("button",{onClick:Ee,class:"ml-auto flex-shrink-0"},s[18]||(s[18]=[e("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]))])])])):h("",!0),x.value.size>0?(i(),a("div",vl,[e("div",xl,[e("div",ml,[e("span",gl,d(x.value.size)+" trade"+d(x.value.size!==1?"s":"")+" selected ",1),e("button",{onClick:ze,class:"text-blue-600 hover:text-blue-800 text-sm font-medium"}," Select All "),e("button",{onClick:re,class:"text-gray-600 hover:text-gray-800 text-sm font-medium"}," Clear Selection ")]),e("div",hl,[e("button",{onClick:et,disabled:x.value.size<2||k.value,class:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},[k.value?(i(),a("svg",yl,s[20]||(s[20]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(i(),a("svg",_l,s[21]||(s[21]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},null,-1)]))),s[22]||(s[22]=e("span",null,"Link Trades",-1))],8,bl),e("button",{onClick:tt,disabled:k.value,class:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},s[23]||(s[23]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),e("span",null,"Unlink",-1)]),8,wl)])])])):h("",!0),e("div",kl,[u.value==="list"?(i(),a("div",$l,[(i(),a("svg",{ref_key:"connectorSvg",ref:le,class:"absolute pointer-events-none z-20",style:{left:"0px",top:"0",overflow:"visible"},width:300,height:Me.value},[(i(!0),a(I,null,D(Oe.value,(t,c)=>(i(),a("g",{key:c},[e("path",{d:t.path,stroke:t.color,"stroke-width":"2",fill:"none",class:"opacity-80"},null,8,Sl),e("circle",{cx:t.startDot.x,cy:t.startDot.y,r:"4",fill:t.color,class:"opacity-90"},null,8,Cl),e("circle",{cx:t.endDot.x,cy:t.endDot.y,r:"4",fill:t.color,class:"opacity-90"},null,8,Ml)]))),128))],8,Pl)),e("div",Ll,[e("div",zl,[e("div",Tl,[e("table",Bl,[e("thead",Nl,[e("tr",null,[e("th",El,[e("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:x.value.size===o.value.length&&o.value.length>0,indeterminate:x.value.size>0&&x.value.size<o.value.length,onChange:s[4]||(s[4]=t=>x.value.size===o.value.length?re():ze())},null,40,jl)]),s[24]||(s[24]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Symbol ",-1)),s[25]||(s[25]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Action ",-1)),s[26]||(s[26]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quantity ",-1)),s[27]||(s[27]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Entry Price ",-1)),s[28]||(s[28]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Current/Exit ",-1)),s[29]||(s[29]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," P&L ",-1)),s[30]||(s[30]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),s[31]||(s[31]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",Al,[(i(!0),a(I,null,D(o.value,t=>(i(),a("tr",{key:t.id,class:y({"bg-yellow-50":t.justUpdated}),ref_for:!0,ref:c=>{c&&(ge.value[t.id]=c)}},[e("td",Fl,[e("div",Il,[e("input",{type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:x.value.has(t.id),onChange:c=>Ze(t.id)},null,40,Dl),t.link_group_id?(i(),a("div",ql,s[32]||(s[32]=[e("svg",{class:"h-4 w-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)]))):h("",!0)])]),e("td",Vl,d(t.symbol),1),e("td",Rl,[e("span",{class:y([t.action==="BUY"?"text-green-600":"text-red-600","font-medium"])},d(t.action),3)]),e("td",Ul,[t.link_group_id&&R(t)!==t.quantity?(i(),a("span",Ol,[B(d(U(R(t)))+" remaining ",1),e("span",Yl,"("+d(U(t.quantity))+" orig.)",1)])):(i(),a("span",Hl,d(U(t.quantity)),1))]),e("td",Ql," $"+d(O(t.entry_price||t.broker_fill_price)),1),e("td",Jl,[(t.status==="filled"||t.status==="open")&&t.current_price?(i(),a("div",Gl," $"+d(O(t.current_price)),1)):t.exit_price?(i(),a("div",Wl," $"+d(O(t.exit_price)),1)):(i(),a("div",Kl," $"+d(O(t.current_price)),1))]),e("td",Xl,[(t.status==="filled"||t.status==="open")&&t.floating_pnl!==null&&t.floating_pnl!==void 0?(i(),a("span",{key:0,class:y(t.floating_pnl>=0?"text-green-600":"text-red-600")}," $"+d(O(t.floating_pnl)),3)):t.status==="closed"&&t.pnl!==null&&t.pnl!==void 0?(i(),a("span",{key:1,class:y(t.pnl>=0?"text-green-600":"text-red-600")}," $"+d(O(t.pnl)),3)):(i(),a("span",Zl,"-"))]),e("td",eo,[e("span",{class:y(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",t.status==="pending"?"bg-yellow-100 text-yellow-800":t.status==="filled"?"bg-blue-100 text-blue-800":t.status==="open"?"bg-green-100 text-green-800":t.status==="closed"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"])},d(t.status),3)]),e("td",to,[(t.status==="filled"||t.status==="open")&&t.action==="BUY"?(i(),a("button",{key:0,onClick:c=>at(t),class:"inline-flex items-center px-3 py-1 border border-transparent text-sm rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},s[33]||(s[33]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 11V7a4 4 0 00-8 0v4M5 11h14l-1.68 9.39A2 2 0 0115.34 22H8.66a2 2 0 01-1.98-1.61L5 11z"})],-1),B(" Sell ")]),8,so)):h("",!0)])],2))),128))])]),o.value.length===0?(i(),a("div",lo,s[34]||(s[34]=[e("p",{class:"text-gray-500"},"No trades yet",-1)]))):h("",!0)])])])])):u.value==="grid"?(i(),a("div",oo,[_e.value.length===0?(i(),a("div",ro,s[35]||(s[35]=[Re('<div class="text-center" data-v-0cebfe74><div class="mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center" data-v-0cebfe74><svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0cebfe74><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4" data-v-0cebfe74></path></svg></div><h3 class="mt-4 text-lg font-medium text-gray-900" data-v-0cebfe74>No Open Positions</h3><p class="mt-2 text-sm text-gray-500" data-v-0cebfe74> You don&#39;t have any open positions to display.<br data-v-0cebfe74> Open positions will appear here with live price tracking. </p></div>',1)]))):(i(),a("div",no,[h("",!0),(i(!0),a(I,null,D(_e.value,t=>(i(),a("div",{key:t.id,class:y(["bg-gradient-to-br from-white to-slate-50 rounded-2xl p-5 hover:scale-[1.02] transition-all duration-300 relative min-h-[400px] h-auto",Ge(t)])},[s[52]||(s[52]=e("div",{class:"absolute inset-0 opacity-[0.02] overflow-hidden rounded-2xl"},[e("div",{class:"absolute top-0 right-0 w-20 h-20 bg-slate-300 rounded-full transform translate-x-6 -translate-y-6"}),e("div",{class:"absolute bottom-0 left-0 w-16 h-16 bg-slate-400 rounded-full transform -translate-x-4 translate-y-4"})],-1)),e("div",ao,[e("div",{class:y(["w-8 h-8 rounded-full flex items-center justify-center border-2 border-white shadow-lg transition-all duration-200",we(t)?"bg-gradient-to-br from-purple-500 to-violet-600 hover:from-purple-400 hover:to-violet-500":"bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-400 hover:to-orange-500"]),title:we(t)?"Enhanced Trade - Protected with Stop Loss/Take Profit":"Plain Trade - Basic Position"},[we(t)?(i(),a("svg",co,s[41]||(s[41]=[e("path",{d:"M5 16L3 8l4.5 2.5L12 7l4.5 3.5L21 8l-2 8H5z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",fill:"currentColor"},null,-1)]))):(i(),a("svg",uo,s[42]||(s[42]=[e("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"},null,-1)])))],10,io)]),e("div",po,[e("div",fo,[e("button",{onClick:c=>V(t.id.toString(),c),class:"w-8 h-8 rounded-full flex items-center justify-center border-2 border-white shadow-lg bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 transition-all duration-200 group",title:"Trade Actions"},s[43]||(s[43]=[e("svg",{class:"w-4 h-4 text-white group-hover:scale-110 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})],-1)]),8,vo),L.value[t.id.toString()]?(i(),a("div",{key:0,onClick:s[9]||(s[9]=ve(()=>{},["stop"])),class:"absolute right-0 top-10 w-48 bg-white rounded-lg shadow-xl border border-slate-200 py-2 z-30"},[e("button",{onClick:c=>{Qe(t),Z()},class:"w-full px-4 py-2 text-left text-sm text-slate-700 hover:bg-slate-50 flex items-center gap-2"},s[44]||(s[44]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),B(" View Details ")]),8,xo),e("button",{onClick:c=>We(t),class:"w-full px-4 py-2 text-left text-sm text-rose-600 hover:bg-rose-50 flex items-center gap-2"},s[45]||(s[45]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})],-1),B(" Sell All ")]),8,mo)])):h("",!0)])]),e("div",go,[e("div",ho,[e("div",null,[e("h3",bo,d(t.symbol),1),t.link_group_id&&R(t)!==t.quantity?(i(),a("p",yo,[e("span",_o,d(U(R(t)))+" remaining",1),e("span",wo," ("+d(U(t.quantity))+" orig.)",1)])):(i(),a("p",ko,d(U(t.quantity))+" shares",1))]),e("div",null,[e("span",{class:y(["px-3 py-1.5 text-sm font-bold rounded-full border-2 border-white/20",t.action==="BUY"?"bg-emerald-500/80 text-white hover:bg-emerald-500":"bg-rose-500/80 text-white hover:bg-rose-500"])},d(t.action),3)])])]),e("div",$o,[e("div",{class:y(["flex-1 px-3 py-2 rounded-lg border-l-3 text-center",oe(t)>=0?"bg-gradient-to-r from-green-50 to-emerald-50 border-l-green-600":"bg-gradient-to-r from-red-50 to-rose-50 border-l-red-600"])},[s[46]||(s[46]=e("div",{class:"text-xs font-medium text-slate-600 mb-1"},"Realized P&L",-1)),e("div",{class:y(["text-sm font-bold",oe(t)>=0?"text-green-700":"text-red-700"])},d(oe(t)>=0?"+":"-")+"$"+d(Math.abs(oe(t)).toFixed(2)),3)],2),e("div",{class:y(["flex-1 px-3 py-2 rounded-lg border-l-3 text-center",G(t)>=0?"bg-gradient-to-r from-green-50 to-emerald-50 border-l-green-600":"bg-gradient-to-r from-red-50 to-rose-50 border-l-red-600"])},[s[47]||(s[47]=e("div",{class:"text-xs font-medium text-slate-600 mb-1"},"Floating P&L",-1)),e("div",{class:y(["text-sm font-bold",G(t)>=0?"text-green-700":"text-red-700"])},d(G(t)>=0?"+":"-")+"$"+d(Math.abs(G(t)).toFixed(2)),3)],2)]),e("div",Po,[!t.take_profit_levels||t.take_profit_levels.length===0?(i(),a("div",So,[e("div",Co,[e("div",Mo,[s[48]||(s[48]=e("svg",{class:"w-3 h-3 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),e("input",{value:T(t.id).topPercent,onInput:c=>N(t.id,"topPercent",Number(c.target.value)),type:"number",min:"1",max:"50",class:"w-12 px-1 py-0.5 text-xs border rounded",title:"Top scale (%)"},null,40,Lo),s[49]||(s[49]=e("span",{class:"text-slate-500"},"%",-1))]),e("div",zo,[s[50]||(s[50]=e("svg",{class:"w-3 h-3 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l2.293-2.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),e("input",{value:T(t.id).bottomPercent,onInput:c=>N(t.id,"bottomPercent",Number(c.target.value)),type:"number",min:"1",max:"50",class:"w-12 px-1 py-0.5 text-xs border rounded",title:"Bottom scale (%)"},null,40,To),s[51]||(s[51]=e("span",{class:"text-slate-500"},"%",-1))])])])):h("",!0),e("div",Bo,[X(zt,{position:t,"entry-price":Number(t.entry_price||t.broker_fill_price||0),"current-price":je(t),"stop-loss":t.stop_loss?Number(t.stop_loss):void 0,"take-profit-levels":t.take_profit_levels||[],"scale-settings":T(t.id),class:"h-80 w-full"},null,8,["position","entry-price","current-price","stop-loss","take-profit-levels","scale-settings"])])])],2))),128))]))])):h("",!0)])]),X(qe,{signal:w.value,"is-open":j.value,onClose:it,onExecuted:dt},null,8,["signal","is-open"]),X(qe,{signal:f.value,"is-open":v.value,onClose:Fe,onExecuted:ut},null,8,["signal","is-open"]),X(vs,{trade:me.value,"is-open":xe.value,onClose:Je},null,8,["trade","is-open"]),X(Ds,{show:ee.value,position:te.value,onClose:s[10]||(s[10]=t=>{ee.value=!1,te.value=null}),onConfirm:Ke},null,8,["show","position"])]))}}),jo=Ce(No,[["__scopeId","data-v-0cebfe74"]]);export{jo as default};
